# fix adapt command

# 構文
```
fix ID group-ID adapt N attribute args ... keyword value ...
```
- ID, group-IDはfixコマンドで文書化されています。
- adapt = このfixコマンドのスタイル名
- N = この回数だけシミュレーション設定を適応するタイムステップ
- 1つ以上の属性/引数ペアを追加できます。
- 属性 = pairまたはatom

pair引数 = pstyle pparam I J v_name  
pstyle = ペアスタイル名、例: soft  
pparam = 時間とともに適応するパラメータ  
I, J = パラメータを設定するタイプペア  
v_name = pparamの値を計算する変数の名前  
atom引数 = aparam v_name  
aparam = 時間とともに適応するパラメータ  
v_name = aparamの値を計算する変数の名前

- 0個以上のキーワード/値ペアを追加できます。
- キーワード = scaleまたはreset

scale値 = noまたはyes  
no = 変数の値が新しい設定  
yes = 変数の値が元の設定に掛け算される  
reset値 = noまたはyes  
no = 値は実行終了時に変更されたまま  
yes = 実行終了時に変更された値を元の値にリセット

# 例
```
fix 1 all adapt 1 pair soft a 1 1 v_prefactor
fix 1 all adapt 1 pair soft a 2* 3 v_prefactor
fix 1 all adapt 10 atom diameter v_size
```

# 説明
シミュレーションが実行される際に、1つ以上の特定のシミュレーション属性や設定を時間経過とともに変更または適応させます。このfixコマンドで変化させることができるペアポテンシャル、K-space、原子属性については以下で説明します。その他にも、シミュレーションパラメータを時間依存的に変更するために使用できる多くのfixコマンドがあります。例えば、「fix deform」コマンドはシミュレーションボックスのサイズや形状を変更し、「fix move」コマンドは原子の位置と速度を指定した方法で変更します。また、変数を引数として指定できるコマンドも多くあります。これにより、時間依存的な量を計算できるequalスタイルの変数を使って、シミュレーションパラメータを時間経過とともに変化させることができます。

Nが0に指定された場合、指定された属性はシミュレーション開始前に1回だけ変更されます。これで十分なのは、関連する変数が時間依存的でない場合です。N > 0の場合は、シミュレーション中にNステップごとに変更が行われます。通常、これは時間依存的な変数を使用する場合です。

resetキーワードの値に応じて、このfixコマンドによって変更された属性は、シミュレーションの終了時に元の値にリセットされるかされないかが決まります。resetが「yes」に指定されていても、シミュレーション中に書き込まれたリスタートファイルには変更された設定が含まれます。

scaleキーワードが「no」に設定されている場合、パラメータの設定値は変数が生成する値になります。scaleキーワードが「yes」に設定されている場合、変更されたパラメータの値はそのパラメータの初期値に変数が生成する値を掛けたものになります。つまり、変数はパラメータに時間依存的に適用される「スケール因子」となります。内部的には、パラメータ自体が実際に変更されるので、実行後にパラメータを元の値に戻したい場合は、reset yesオプションを使用することを確認してください。

pairキーワードは、[pair_style]()コマンドで定義されたポテンシャルのさまざまなパラメータを変更できるようにします。ただし、pairスタイルがそれをサポートしている場合に限ります。[pair_style]()と[pair_coeff]()コマンドは通常の方法で使用され、最初にこれらのパラメータを指定する必要があります。fix adaptコマンドは単にこれらのパラメータを上書きします。

pstyle引数はpairスタイルの名前です。[pair_style hybridやhybrid/overlay]()が使用されている場合、pstyleはサブスタイル名で指定する必要があります。例えば、pstyleは「soft」や「lubricate」と指定できます。pparam引数は変更するパラメータの名前です。これが、現在このfixコマンドで変更可能なpairスタイルとそのパラメータのリストです。各pairスタイルのdocページやエネルギー式を参照して、これらのパラメータの意味を確認してください。

||||
|-|-|-|
|[soft]()|a|type pairs|

[!WARNING]新しいポテンシャルとそのパラメータをこのリストに追加するのは簡単です。通常、ポテンシャルに関連するpair_*.cppファイルにextract()メソッドを追加するだけで済みます。

いくつかのパラメータはpairスタイルのグローバル設定です。例えば、pair_style lubricateの粘度設定「mu」などです。その他のパラメータは、pairスタイル内での原子タイプペアに適用されます。例えば、[pair_style soft]()の前因子「a」などです。

タイプペアパラメータが指定された場合、IおよびJの設定は、どのタイプペアに適用するかを指定するために必要です。グローバルパラメータが指定された場合でも、IおよびJの設定は指定する必要がありますが、それらは無視されます。

[pair_coeff]()コマンドと同様に、IとJは2つの方法のいずれかで指定できます。上記の最初の例のように、各値を明示的に数値で指定することができます。I <= Jは必要です。LIGGGHTS(R)-PUBLICは、対称的なJ,I相互作用の係数を同じ値に設定します。

ワイルドカードのアスタリスク（）は、I,J引数の代わりに、またはそれと組み合わせて、複数の原子タイプペアの係数を設定するために使用できます。形式は「」または「n」または「n」または「m*n」となります。Nは原子タイプの数を表し、アスタリスクが数値なしで指定された場合は、1からNまでのすべてのタイプを意味します。先頭のアスタリスクは1からn（含む）までのすべてのタイプを意味します。末尾のアスタリスクはnからN（含む）までのすべてのタイプを意味します。中央にアスタリスクがある場合はmからn（含む）までのすべてのタイプを意味します。I <= Jであるタイプペアのみが考慮される点に注意してください。アスタリスクがJ < Iとなるタイプペアを示す場合、それらは無視されます。

重要な注意: p[air_style hybridまたはhybrid/overlay]()が使用されている場合、pstyleはサブスタイル名になります。そのサブスタイルのタイプペア値（pair_coeffコマンドで定義されたもの）に対応するI,J引数を指定する必要があります。

キーワードpairのv_name引数は、fixコマンドが呼び出されるたびに新しい値にパラメータを設定するために評価される[equal-style variable]()の名前です。v_nameとして指定する必要があります。equal-style変数は、さまざまな数学的関数を使用した式を指定でき、シミュレーションボックスのパラメータ、タイムステップ、および経過時間のための[thermo_style]()コマンドキーワードも含まれます。これにより、時間の関数として変化するパラメータや、連続的に実行される複数のランにまたがるパラメータを簡単に指定できます。後者については、[run]()コマンドのstartおよびstopキーワードや、[thermo_style custom]()のelaplongキーワードの詳細を参照してください。

例えば、これらのコマンドは、[pair_style soft]()ポテンシャルのprefactor係数をシミュレーションの過程で10.0から30.0に線形的に変化させます：

```
variable prefactor equal ramp(10,30)
fix 1 all adapt 1 pair soft a * * v_prefactor
```

atomキーワードは、さまざまな原子のプロパティを変更できるようにします。aparam引数は、変更するパラメータの名前です。現在、このfixによって変更できる原子のパラメータのリストは以下の通りです：

- charge = 粒子の電荷
- diameter = 粒子の直径

atomキーワードのv_name引数は、各ステップでこのfixが呼び出されるたびに新しい値にパラメータを設定するために評価される、[equal-style variable]()の名前です。v_nameとして指定し、nameは変数名を指します。equal-style変数に関連する式の説明については、上記の議論を参照してください。新しい値は、fixグループ内のすべての原子に対応する属性に割り当てられます。

もしatomパラメータがdiameterであり、粒子に対して原子単位の密度および質量が定義されている場合（例えば[atom_style granular]()の場合）、直径が変更されると、密度が一定と仮定して各粒子の質量も変更されます。

例えば、以下のコマンドは、シミュレーションの1000ステップにわたって、centerグループ内のすべての粒子の直径を1.0から0.1に線形的に縮小させます：

```
variable size equal ramp(1.0,0.1)
fix 1 center adapt 10 atom diameter v_size
```

# Restart, fix_modify, output, run start/stop, minimize info
このfixに関する情報は[binary restart file]()には書き込まれません。このfixには[fix_modify]()オプションは関連していません。このfixによって保存されるグローバルまたは原子ごとの量はなく、さまざまな[output commands]()でアクセスすることはできません。このfixのパラメータは、runコマンドのstart/stopキーワードと一緒に使用することはできません。このfixはエネルギー最小化中には呼び出されません。

# 制限事項
none

# 関連コマンド
compute ti

# デフォルト
オプションのデフォルトは、scale = no、reset = noです。