# fix ave/euler command

# 構文
```
fix ID group-ID ave/euler nevery N cell_size_relative c parallel par keywords values
```
- ID、group-IDはfixコマンドで文書化されています。
- ave/euler = このfixコマンドのスタイル名
- nevery = 必須キーワード
- n = この多くのタイムステップごとに平均値を計算
- cell_size_relative = 必須キーワード
- c = 最大カットオフの倍数でのセルサイズ
- parallel = 必須キーワード
- par = 「yes」または「no」
- 0個以上のキーワード/値ペアを追加できます
- キーワード = basevolume_region
basevolume_regionの値 = reg-ID  
region-ID = この領域に基づいて正しいグリッドセルの体積

# 例
```
fix 1 all ave/euler nevery 100 cell_size_relative 4.5
```

# 説明
速度、半径、体積分率、圧力（応力テンソルのトレースの-1/3）を、neveryキーワードで指定されたタイムステップごとにセルベースで平均化します。セルのサイズは、cell_size_relativeを通じて最大カットオフの倍数として計算されます。少なくとも3の相対的なセルサイズが必要であることに注意してください。

速度はファヴレ（質量）平均され、半径は算術平均される点に注意してください。応力を計算するために、このコマンドは内部でcompute stress/atomを使用します。これにより、非ゼロの平均速度を持つ顆粒粒子に対して対流項が正しく含まれます（これはcompute stress/atomには含まれていません）。ただし、結合、角度、二面角、kspaceの寄与は含まれていないため、最終的な応力テンソルは次のように記述されます。

$$
S_{ab}=-\left[ m \left( v_a-vave_a\right) \left( v_b-vave_b\right)
                +\frac{1}{2}\sum_{n=1}^{N_p}\left( r_{1_a}F_{1_b} + r_{2_a}F_{2_b}\right)
        \right]
$$

ここで、vaveは（セルベースの）平均速度です。最初の項は原子Iの運動エネルギーへの寄与です。二番目の項は対相互作用におけるペアワイズエネルギーの寄与であり、nは原子IのNp個の近隣原子に対してループし、r1とr2はペアワイズ相互作用における2つの原子の位置、F1とF2はそのペアワイズ相互作用から生じた2つの原子に対する力です。

parallelオプションは、各プロセスが後処理のために独自のローカルグリッドを割り当てるか（parallel = yes）、または各プロセスが単一のグローバルグリッドに貢献するか（parallel = no）を決定します。parallel通信が必要なため遅くなりますが、グリッドセルが時間とともに移動しないことを確保します（例えば、境界が移動する場合など）。

basevolume_regionオプションは、理論的に粒子で満たすことができる体積を表す領域を指定するために使用されます。これにより、グリッド内の各セルの平均体積の基準が補正されます。例えば、円筒形の壁を使用する場合、basevolume_regionオプションには同じ円筒形の領域を使用することが理にかなっており、このコマンドは近傍壁セルでの体積分率を正確に計算します。グリッドセルと領域との重なり計算は、モンテカルロ法を使用して行われます。

# Restart, fix_modify, output, run start/stop, minimize info
この修正に関する情報は、[binary restart file]()には書き込まれません。この修正には、[fix_modify]()オプションは適用されません。

この修正は、上記の量を計算し、[dump euler/vtk]()コマンドを介して出力します。値は、計算が実行されるタイムステップ（neveryの倍数）でのみアクセスできます。

この修正のパラメータは、[run]()コマンドのstart/stopキーワードと一緒に使用することはできません。この修正は、エネルギー最小化中には呼び出されません。

# 制限事項
体積分率および応力は、構造化された（等間隔の規則的な）グリッドを前提に計算されます。そのため、グリッドに沿っていない壁付近の体積分率や応力は不正確になります。

粗視化に関する情報：

このコマンドと組み合わせて粗視化を使用すると、異なる動力学やシステム状態が発生し、それにより不整合が生じる可能性があります。ただし、このモデルがグローバルな動力学やシステム状態に与える影響は小さい場合もあり、結果が有効である場合もあります。これについては専門家がケースバイケースでレビューする必要があります。

[!NOTE]粗視化はLIGGGHTS(R)-PUBLICにおいて利用可能でない場合もあります。


# 関連コマンド
[compute](), [compute stress/atom](), [fix ave/atom](), [fix ave/histo](), [fix ave/time](), [fix ave/spatial](),

# デフォルト
none