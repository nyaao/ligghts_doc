# create_atom command

## 構文
```
create_atoms type style args keyword values ...
```
type = 作成する原子のタイプ（1～Ntypes）  
style = box または region または single または random

box args = なし
region args = region-ID
region-ID = この領域内に含まれる場合のみ原子を作成します。
single args = x y z
x, y, z = 単一の原子の座標（距離単位）
random args = N seed region-ID
N = 作成する原子の数
seed = ランダム番号の種（10000より大きい素数）
region-ID = この領域内で原子を作成します。シミュレーションボックス全体を使用する場合は NULL を指定します。

ゼロ個以上のキーワード/値ペアを追加できます。  
keyword = basis または remap または units または all_in

basis values = M itype
M = 基準となる原子
itype = この基準原子に割り当てる原子タイプ（1～N）
remap value = yes または no
units value = lattice または box
lattice = 幾何学は格子単位で定義されます
box = 幾何学はシミュレーションボックス単位で定義されます
all_in value = all_in_dist
all_in_dist = 挿入のための領域境界からの距離

## 例
```
create_atoms 1 box
create_atoms 3 region regsphere basis 2 3
create_atoms 3 single 0 0 5
```

## 説明
このコマンドは、原子の座標を [read_data]() または [read_restart]() コマンドで明示的に読み込む代わりに、格子上の原子、単一の原子、またはランダムな原子集合を作成します。シミュレーションボックスはすでに存在している必要があり、通常は [create_box]() コマンドで作成されます。このコマンドを使用する前に、[lattice]() コマンドを使って格子を定義する必要があります。ただし、units = box の単一スタイルやランダムスタイルでは例外です。

boxスタイルの場合、create_atoms コマンドは格子上の原子でシミュレーションボックス全体を埋めます。シミュレーションボックスが周期的である場合、ボックスの境界で原子が重ならないように、ボックスのサイズが格子間隔の倍数であることを確認する必要があります。ボックスが周期的であり、特定の次元で格子間隔の倍数である場合、LIGGGHTS(R)-PUBLICはボックスの境界にちょうど1つの原子を配置するように注意します（ボックスの両側に1つずつ）。

regionスタイルの場合、シミュレーションボックス内で、かつ地域の体積に一致する幾何学的な体積が埋められます。詳細については [region]() コマンドを参照してください。なお、地域は幾何学的な境界の内外に設定することができます。また、地域が周期的なシミュレーションボックスと同じサイズである場合（ある次元で）、LIGGGHTS(R)-PUBLICはボックススタイルと同じロジックを適用せず、境界にちょうど1つの原子が配置されることを保証しません。もしこれが望む挙動であれば、box スタイルを使用するか、地域サイズを調整して正確に必要な原子を配置してください。オプションの all_in キーワードを使用することで、粒子を地域境界から指定された距離（all_in_dist で指定）だけ離れた位置に挿入することができます。all_in は地域挿入にのみ実装されています。

singleスタイルの場合、指定された座標に単一の原子がシステムに追加されます。これはデバッグ目的や、指定された位置にわずかな数の原子を持つ小さなシステムを作成する場合に役立ちます。

randomスタイルの場合、N個の原子がランダムに生成された座標でシステムに追加され、これはアモルファスシステムを生成するために有用です。原子は指定された乱数シードを使用して1つずつ作成され、これによりシミュレーションで使用するプロセッサの数に関係なく、同じ原子座標のセットが得られます。region-ID 引数がNULLとして指定されると、作成された原子はシミュレーションボックス内の任意の位置に配置されます。region-ID が指定されると、シミュレーションボックス内で、かつ地域の体積と一致する幾何学的な体積が埋められます。詳細については [region]() コマンドを参照してください。regionはその「体積」を幾何学的境界の内外に指定できることに注意してください。

[!WARNING]  
ランダムスタイルで生成された原子は通常、非常に重なり合っており、そのため多くの原子間ポテンシャルで大きなエネルギーや力が計算されることになります。したがって、通常の動力学を実行する前に、エネルギー最小化を行うか、[fix nve/limit]() を使用してダイナミクスを実行し、システムを平衡状態に持っていく必要があります。

basis キーワードは、特定の基底原子に割り当てられる原子タイプを指定します。基底原子が単位格子のためにどのように定義されるかについての詳細は、[lattice]() コマンドを参照してください。デフォルトでは、すべての作成された原子は引数 type をその原子タイプとして割り当てられます。

remap キーワードは single スタイルにのみ適用されます。yes に設定された場合、指定された位置がシミュレーションボックスの外にあると、関連する次元が周期的であればその位置はボックス内に再マッピングされます。no に設定された場合、再マッピングは行われず、位置がボックスの外にある場合は原子は作成されません。

units キーワードは、single スタイルで作成された1つの原子の座標を指定するために使用される距離単位の意味を決定します。box 値は、[units]() コマンドで定義された標準的な距離単位（例：units = real または metal でのアンストローム）を選択します。lattice 値は、距離単位が格子間隔であることを意味します。

このコマンドは、既存の原子に追加で原子を加えます。[create_atoms]() コマンドを複数回使用することで、シミュレーションに複数の原子セットを追加できます。例えば、異なる方向を指定した[lattice]コマンドと create_atoms を交互に使用することで、粒界を作成することができます。[create_atoms]() コマンドを [delete_atoms]() コマンドと組み合わせて使用することで、かなり複雑なジオメトリを作成することができます。また、[create_atoms]() コマンドは、データファイルやリスタートファイルから以前に読み込んだシステムに原子を追加するためにも使用できます。これらすべてのケースで、新しい原子が既存の原子と不適切に重ならないように注意する必要があります。重なりを処理するためには、[delete_atoms]() コマンドを使用できます。

作成された原子には次のように原子IDが割り当てられます。作成された原子の集合は、[create_atoms]() コマンドが呼び出される前に存在していた最大の原子IDのすぐ後ろから連続したIDが割り当てられます。シミュレーションが異なる数のプロセッサで実行される場合、特定の作成された原子に同じIDが割り当てられる保証はありません。

作成された原子は、ID、原子タイプ、xyz位置に加えて、選択した原子スタイルによって定義された他のプロパティもデフォルト値に設定されます。詳細については、[atom_style]() コマンドを参照してください。これらの値を変更する方法については、[set]() コマンドや [velocity]() コマンドを参照してください。
- charge = 0.0
- diameter = 1.0
- shape = 0.0 0.0 0.0
- density = 1.0
- volume = 1.0
- velocity = 0.0 0.0 0.0
- angular velocity = 0.0 0.0 0.0
- angular momentum = 0.0 0.0 0.0
- quaternion = (1, 0, 0, 0)
- bonds = none

注意すべき点は、sphere 原子スタイルでは、デフォルトの粒子径が 1.0 と設定され、密度も 1.0 になります。これにより、粒子の質量は 1.0 ではなく、PI/6 * diameter^3 = 0.5236 となります。

また、ellipsoid 原子スタイルでは、デフォルトの粒子形状が (0.0 0.0 0.0) に設定され、密度は 1.0 となり、これは点粒子を意味し、質量は 1.0 です。

[set]() コマンドを使用することで、これらのデフォルト設定を上書きすることができます。

## 制限事項
このコマンドを使用するには、事前に [atom_style]() を定義しておく必要があります。

## 関連コマンド
[lattice](), [region](), [create_box](), [read_data](), [read_restart]()

## デフォルト
basis キーワードのデフォルトは、すべての作成された原子が引数のタイプを原子タイプとして割り当てられることです。
remap のデフォルトは no で、units のデフォルトは box です。