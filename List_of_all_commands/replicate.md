# replicate command

## 構文
```
replicate nx ny nz offset ox oy oz shift sx sy sz
```
nx, ny, nz = 各次元における複製ファクター（整数）  
offset ox oy oz: 必須キーワードで、値が必要

```
ox, oy, oz = offset of each replication in box units
```

shift sx sy sz: 任意のキーワードで、値が必要 

```
sx, sy, sz = shift all particles by these values in box units
```


## 例
```
replicate 2 3 2 offset 1.0 1.0 2.0
replicate 1 2 2 offset 2.0 2.0 2.0 shift -0.1 0.2 0.0
```

## 説明
現在のシミュレーションを各次元で1回以上複製します。例えば、複製ファクターが2,2,2の場合、各次元でシミュレーション領域を2倍にして、元の8倍の原子数を持つシミュレーションを作成します。1次元の複製ファクターが1の場合、シミュレーション領域は変更されません。offsetキーワードは、元のシミュレーションと複製されたシミュレーションの間のオフセットを決定します。一般的には、初期の周期的ボックスのサイズに従って選ばれるべきです。

原子のすべてのプロパティが複製され、速度も含まれますが、これは望ましくない場合もあります。新しい原子には新しい原子IDと分子IDが割り当てられます。新しい原子同士、または古い原子と新しい原子の間で結合やその他のトポロジー相互作用が作成されます。これは、各原子の画像フラグを使用して、周期的ボックスから「アンラップ」して複製することによって行われます。

これは、元のデータファイルで指定した周期境界を越える分子間結合が、画像フラグが1だけ異なる2つの原子間である必要があることを意味します。これにより、結合が適切にアンラップされます。

shiftキーワードは、指定したベクトルでシミュレーション全体をシフトすることを許可します。

## 制限事項
2Dシミュレーションは、z軸方向に複製できません。

シミュレーションがある次元で非周期的である場合、その次元で複製する際には注意が必要です。なぜなら、原子がほぼ重なり合って配置される可能性があるからです。

現在のシミュレーションがリスタートファイルから読み込まれた場合（実行前）、個々の原子についてのfix情報はファイルに保存されていない可能性があります。同様に、replicateコマンドを使用する際に、原子情報のベクトルを保存する必要があるfixは定義できません。これは、replicateコマンドが新たに作成された原子に対してその情報を複製する方法を知らないためです。

剛体（fix rigidコマンドで定義された）を持つシステムを複製する場合、現在定義されている場合でも、リスタートファイルが読み込まれた後に複製する場合でも、周期境界をまたぐ剛体間の結合があると問題が発生する可能性があります。これは、剛体内の粒子に対する周期画像情報が非剛体システムのそれとは異なり、結果として周期的なボックスをまたぐ新たな結合が作成されることがあるからです。このような場合、replicateコマンドは使用できません。

## 関連コマンド
none

## デフォルト
none
