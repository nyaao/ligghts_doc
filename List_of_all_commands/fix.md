# fix command

## 構文
```
fix ID group-ID style args
```
ID = ユーザーが割り当てたfixの名前
group-ID = fixを適用する原子群のID
style = 一連のスタイル名のいずれか（以下参照）
args = 特定のスタイルで使用される引数

## 例
```
fix 1 all nve
fix 3 all nvt temp 300.0 300.0 0.01
fix mine top setforce 0.0 NULL 0.0
```

## 説明
原子群に適用されるfixを設定します。LIGGGHTS(R)-PUBLICにおける「fix」とは、タイムステッピングや最小化の過程でシステムに適用される操作のことです。例えば、時間積分による原子の位置や速度の更新、温度の制御、原子への拘束力の適用、境界条件の強制、診断の計算などがあります。LIGGGHTS(R)-PUBLICでは、数十種類のfixが定義されており、新しいものを追加することもできます。詳細についてはこのセクションをご覧ください。

LIGGGHTS(R)-PUBLICで定義されたfixの完全なリストは、このページにあります。

Fixはタイムステップの異なる段階で操作を実行します。同じタイムステップ段階で2つ以上のfixが操作を行う場合、それらは入力スクリプトで指定された順序で呼び出されます。

FixのIDには、英数字とアンダースコアのみを使用できます。

Fixは、[unfix]()コマンドで削除することができます。

[!WARNING][unfix]()コマンドは、fixを無効にする唯一の方法です。単に似たようなスタイルの新しいfixを指定しても、最初のfixは無効になりません。これは特に積分用のfixにおいて重要です。例えば、最初の実行で[fix nvt]()コマンドを使用した後、2回目の実行で[fix nve]()コマンドを使用しても、最初の実行でfix nvtコマンドによって呼び出されたNVT時間積分はキャンセルされません。したがって、2つの時間積分器が同時に適用されることになります！

既存のfixと同じIDおよびスタイルで新しいfixを指定すると、古いfixは削除され、新しいfixが作成されます（おそらく新しい設定で）。これは、古いfixに対して最初に「unfix」コマンドが実行された場合と同じですが、新しいfixは古いfixと同じ順序で既存のfixの中に保持されます。なお、この操作は、[fix_modify]()コマンドで古いfixに対して行った追加の変更も消去します。

[fix_modify]()コマンドは、一部のfixの設定をリセットするために使用できます。個々のfixの詳細については、ドキュメントページを参照してください。

一部のfixは内部状態を保持しており、その状態は[restart]()または[write_restart]()コマンドを使用してバイナリの再起動ファイルに書き込まれます。これにより、再起動されたシミュレーションでもfixは計算を続行できます。再起動ファイルを読み込む入力スクリプトでfixを再指定する方法については、[read_restart]()コマンドを参照してください。どのfixが再起動可能かについては、個々のfixのドキュメントページで確認できます。

いくつかのfixは、グローバル、原子ごと、またはローカルのいずれかのスタイルの量を計算し、それらは他のコマンドで使用されたり、以下に記載されたように出力されたりします。グローバル量は、システム全体の1つ以上の値、例えば、壁が粒子と相互作用するエネルギーのようなものです。原子ごとの量は、各原子ごとに1つ以上の値、例えば、時間0から各原子の変位ベクトルのようなものです。指定されたfixグループに含まれない原子に対しては、原子ごとの値は0.0に設定されます。ローカル量は、各プロセッサが所有する原子に基づいて計算されますが、原子ごとの量はゼロまたはそれ以上の場合があります。

単一のfixは、グローバル、原子ごと、またはローカルの量のいずれか（または何も計算しない場合もあります）を生成することができますが、これらのうち1種類だけを生成することに注意してください。

グローバル、原子ごと、ローカルの各量には、スカラー値、ベクトルの値、または2次元配列の値の3種類があります。各fixのドキュメントページには、生成される値のスタイルと種類が記載されています。例えば、原子ごとのベクトルなどです。一部のfixは、単一のスタイルに対して複数の種類の量を生成します。例えば、グローバルスカラーとグローバルベクトルなどです。

fixの量にアクセスする際、以下のブラケット記法で参照できます。ここで、IDはfixのIDです：

|||
|--|--|
|f_ID|	entire scalar, vector, or array|
|f_ID[I]|	one element of vector, one column of array|
|f_ID[I][J]|	one element of array|


言い換えれば、1つのブラケットを使うことで、量の次元が1回減少します（ベクトル -> スカラー、配列 -> ベクトル）。2つのブラケットを使うことで、次元が2回減少します（配列 -> スカラー）。したがって、スカラーfix値を入力として使用するコマンドは、ベクトルや配列の要素も処理できます。

なお、fix量を使用するコマンドや[variable]()は通常、すべての種類を許可するわけではありません。例えば、コマンドが値のベクトルを必要とし、スカラーを受け付けない場合があります。これは、fix量がスカラーとベクトルの両方を生成する場合でも、f_IDと参照する際に曖昧さが生じないことを意味します。さまざまなコマンドの詳細については、それぞれのドキュメントページに記載されています。

LIGGGHTS(R)-PUBLICでは、fixによって生成された値は以下のように使用できます：

グローバル値は、[thermo_style custom]()コマンドや[fix ave/time]()コマンドを通じて出力できます。また、[variable equal]()や[variable atom]()コマンドで参照することもできます。
原子ごとの値は、[dump custom]()コマンドや[fix ave/spatial]()コマンドを通じて出力できます。また、[fix ave/atom]()コマンドで時間平均を取ったり、[compute reduce]()コマンドで集約したりすることもできます。さらに、原子ごとの値は、[atom-style variable]()で参照することもできます。
ローカル値は、[compute reduce]()コマンドで集約したり、[fix ave/histo]()コマンドでヒストグラム化することができます。
さまざまなLIGGGHTS(R)-PUBLICの出力オプションについての概要は、このhowtoセクションで確認できます。その多くはfixに関連しています。

さまざまなLIGGGHTS(R)-PUBLICの出力オプションの概要については、このhowtoセクションで確認できます。その多くはfixに関連しています。

グローバル量を計算するfixの結果は、「集中的（intensive）」または「広範囲（extensive）」な値である場合があります。集中的な値はシミュレーション内の原子数に依存せず、例えば温度などが該当します。広範囲な値はシミュレーション内の原子数に比例してスケールし、例えば総回転運動エネルギーなどが該当します。[Thermodynamic output]() では、広範囲な値はシステム内の原子数で正規化されますが、集中的な値は正規化されません。もしfixの値が別の方法（例えば[variable]()）でアクセスされる場合、その値が集中的か広範囲かを知りたいことがあるかもしれません。詳細については、個々のfixのドキュメンテーションページを参照してください。

各fixスタイルにはその引数や動作を説明するドキュメントページがあります。詳細については下記をご確認ください。

LIGGGHTS(R)-PUBLICで定義されているfixの完全なリストは、このページにあります。

## 制限事項
いくつかのfixスタイルは特定のパッケージに含まれています。それらは、LIGGGHTS(R)-PUBLICがそのパッケージでビルドされている場合のみ有効です。パッケージに関する詳細は、LIGGGHTS(R)-PUBLICのビルド方法セクションを参照してください。個々のfixのドキュメンテーションページには、それがパッケージの一部であるかどうかが記載されています。

## 関連コマンド
[unfix](), [fix_modify]()

## デフォルト
none
