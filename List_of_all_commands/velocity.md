# velocity command

## 構文
```
velocity group-ID style args keyword value ...
```

- group-ID = 速度を変更する原子のグループID
- style = set、ramp、またはzero

set args = vx vy vz  
vx, vy, vz = 速度の値またはNULL（速度の単位）  
vx, vy, vzのいずれかは変数にすることができます（下記参照）  
setAngular args = angularmx angularmy angularmz  
angularmx, angularmy, angularmz = 角運動量の値またはNULL（角運動量の単位）  
angularmx, angularmy, angularmzのいずれかは変数にすることができます（下記参照）  
ramp args = vdim vlo vhi dim clo chi  
vdim = vxまたはvyまたはvz  
vlo, vhi = 下限および上限の速度値（速度単位）  
dim = xまたはyまたはz  
clo, chi = 下限および上限の座標範囲（距離単位）  
zero arg = linearまたはangular  
linear = 線形運動量をゼロにする  
angular = 角運動量をゼロにする  

- ゼロ個以上のキーワード/値のペアを追加できます
- キーワード = dist、sum、mom、rot、loop、またはunits

dist 値 = uniform または gaussian  
sum 値 = no または yes  
mom 値 = no または yes  
rot 値 = no または yes  
loop 値 = all または local または geom  
rigid 値 = fix-ID  
fix-ID = 剛体固定のID  
units 値 = box または lattice  

## 例
```
velocity border set NULL 4.0 v_vz sum yes units box
velocity all zero linear
```

## 説明
グループ内の原子の速度を、いくつかのスタイルのいずれかで設定または変更します。各スタイルには必須の引数とオプションのキーワード/値のパラメータがあります。すべてのオプションが各スタイルで使用されるわけではありません。各オプションには、以下に記載されたデフォルト値があります。

set スタイルは、グループ内のすべての原子の速度を指定された値に設定します。もし任意の成分がNULLとして指定された場合、その成分は設定されません。vx、vy、vz の速度成分のいずれかを、equal-style または atom-style [variable]()として指定できます。値が変数である場合、その変数は v_name の形式で指定する必要があります。ここで name は変数名です。この場合、変数は評価され、その値が速度成分を決定するために使用されます。

setAngular は set と似ていますが、角運動量を設定します。

equal-style 変数は、さまざまな数学関数を使った式を指定でき、シミュレーションボックスのパラメータやその他のパラメータに対する [thermo_style]() コマンドのキーワードを含めることができます。

Atom-style 変数は、equal-style 変数と同じ式を指定できますが、原子座標などの原子ごとの値も含めることができます。これにより、空間依存の速度場を簡単に指定することができます。

ramp スタイルは、速度が vlo から vhi に均等に変化するように設定され、vx、vy、または vz のいずれかの次元に適用されます。特定の原子に割り当てられる値は、その原子の相対座標値（dim の次元における）に依存します。たとえば、上記の例では、y座標が 10 の原子（5 と 25 の間で 1/4 の位置にある）は、x速度として 1.25（0.0 と 5.0 の間で 1/4 の位置）を割り当てられます。座標範囲外の原子（この場合、5 より小さいまたは 25 より大きい）は、vlo または vhi と等しい速度（この場合、0.0 または 5.0）を割り当てられます。

zero スタイルは、原子群の速度を調整して、合計の線形または角運動量をゼロにします。それ以外の原子の速度には変更を加えません。もし rigid オプションが指定されている場合（下記参照）、ゼロ化は [fix rigid]() または [fix rigid/small]() コマンドで定義された各剛体に対して行われます。言い換えれば、zero linear は各剛体の線形運動量をゼロに設定し、zero angular は各剛体の角運動量をゼロに設定します。これは、各剛体の原子の速度を調整することによって行われます。

すべてのスタイルにおいて、シミュレーションが 2D の場合、原子には z 成分の速度は割り当てられません。これは [dimension]() コマンドを参照してください。

キーワード/値のオプションペアは、さまざまなスタイルで以下のように使用されます。

sum オプションは、zero を除くすべてのスタイルで使用されます。sum = yes の場合、新しい速度は既存の速度に加算され、sum = no の場合、既存の速度は新しい速度で置き換えられます。

mom と rot オプションは create スタイルで使用されます。mom = yes の場合、作成された新しい速度の集合の線形運動量はゼロに設定され、rot = yes の場合、角運動量がゼロに設定されます。

loop オプションは、create スタイルで以下のように使用されます。

loop = all の場合、各プロセッサはシミュレーション内のすべての原子に対して速度を作成しますが、実際に所有している原子に対してのみ速度を保存します。大規模なシミュレーションでは、これが遅いループとなる可能性があります。原子がデータファイルから読み込まれた場合、特定の原子に割り当てられる速度は、使用するプロセッサの数に関係なく同じになります。しかし、[create_atoms]() コマンドで原子が作成された場合、原子IDはプロセッサごとに異なる可能性が高いため、この限りではありません。

loop = local の場合、各プロセッサは自分が所有している原子に対してのみ速度を作成します。乱数の種が調整され、各プロセッサで異なる速度のセットが得られます。この方法は高速なループですが、特定の原子に割り当てられる速度は、その原子を所有しているプロセッサに依存します。したがって、異なる数のプロセッサでシミュレーションを実行すると、結果は常に異なります。

loop = geom の場合、各プロセッサは自分が所有している原子に対してのみループを実行します。各原子に対して、その原子のxyz座標に基づいてユニークな乱数の種が生成され、その種を使用して速度が生成されます。この方法は高速なループですが、特定の原子に割り当てられる速度は、使用するプロセッサの数に関係なく同じになります。ただし、生成される速度のセットは、all または local オプションを使用した場合よりも相関が強くなる可能性があります。

注意すべき点は、loop = geom オプションでは、異なるマシンで実行された2つのシミュレーションに対して必ずしも同一の速度が割り当てられるわけではないということです。これは、xyz座標に基づく計算が、特定のマシンで格納される座標の倍精度値のわずかな違いに敏感であるためです。

rigid オプションは、zero スタイルと一緒に使用した場合にのみ意味を持ちます。このオプションは、剛体のセットを定義する[rigid-body fix]()フィックスのIDを指定することを可能にします。その後、線形または角運動量のゼロ化は、上記のようにフィックスで定義された各剛体に対して実行されます。

units オプションは、set、setAngular、および ramp で使用されます。units = box の場合、速度と座標は velocity コマンドで指定された標準単位であり（例えば、実際の単位では Angstroms/fmsec など）、units = lattice の場合、速度は時間あたりの格子間隔単位（例えば、spacings/fmsec）で、座標は格子間隔の単位で指定されます。この場合、格子間隔は、事前に [lattice]() コマンドを使用して定義されている必要があります。

## 制限事項
none

## 関連コマンド
fix shake, [lattice]()

## デフォルト
オプションのデフォルト値は、dist = uniform、sum = no、mom = yes、rot = no、style on group-ID、loop = all、および units = box です。
