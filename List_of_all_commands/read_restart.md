# read_restart command

## 構文
```
read_restart file
```
- file = 読み込むバイナリリスタートファイルの名前

## 例
```
read_restart save.10000
read_restart restart.*
read_restart poly.*.%
```

## 説明
以前保存したシミュレーションをリスタートファイルから読み込みます。これにより、以前の実行を続行できます。リスタートファイルに保存されている情報については、以下に記載します。

リスタートファイルはバイナリ形式で保存され、正確な再開が可能となるように設計されています。つまり、再開された実行の軌道は、元の実行が続いていた場合と正確に一致します。

いくつかの要因が原因で、丸め誤差により正確な再開ができない場合があります。この場合、2回の実行の軌道はゆっくりと乖離していきます。これには、異なるプロセッサ数で実行することや、[newton]() や [processors]() コマンドなどの設定を変更することが含まれます。このような場合、LIGGGHTS(R)-PUBLICは警告を出します。

いくつかのフィックスは正確に再開できませんが、統計的に類似した結果を提供するべきです。

いくつかのペアスタイルも正確に再開できませんが、統計的に類似した結果を提供するべきです。これは、これらのペアスタイルが原子の速度に依存する力を計算するためであり、力の計算時に速度が半ステップ値で使用されます。実行が再開された場合、力はフルステップの速度で最初に評価されるため、元の実行が続いていた場合とは異なります。これらのペアスタイルには、[granular pair styles]()が含まれます。

再開した実行が、再開ファイルを作成した実行とすぐに異なる場合、それはLIGGGHTS(R)-PUBLICのバグである可能性があるため、挙動が間違っていると思う場合は報告を検討してください。

リスタートファイルはバイナリ形式であるため、他のマシンに移植できない場合があります。この場合、[-r command-line switch]()を使用して、リスタートファイルをデータファイルに変換することができます。

リスタートファイルが書き込まれる方法と同様に（[write_restart]() と [restart]() コマンド参照）、リスタートファイル名には2つのワイルドカード文字を含めることができます。ファイル名に「」が含まれている場合、ディレクトリ内でそのパターンに一致するすべてのファイル名を検索し、「」はタイムステップ値に置き換えられます。最も大きなタイムステップ値を持つファイルが読み込まれます。これにより、最新のリスタートファイルが読み込まれることになります。スクリプトが実行を途中から再開する場合に便利です。run コマンドとその「upto」オプションについて、変更なしで実行を指定する方法については、コマンドの詳細を参照してください。

リスタートファイル名に「%」文字が含まれている場合、LIGGGHTS(R)-PUBLICは複数のファイルが存在することを期待します。[restart]()と[write_restart]()コマンドは、このようなファイルセットがどのように作成されるかを説明しています。read_restartは最初に、「%」が「base」に置き換えられたファイル名を読み込みます。このファイルは、LIGGGHTS(R)-PUBLICにファイルセットを作成したプロセッサ数とそのファイル数を教えます。その後、read_restartは追加のファイルを読み込みます。例えば、リスタートファイルがsave.%として書き込まれた場合、read_restartはsave.base、save.0、save.1、... save.P-1というファイルを読み込みます。ここで、Pはリスタートファイルを作成したプロセッサの数です。現在のLIGGGHTS(R)-PUBLICシミュレーション内のプロセッサは、これらのファイルを読み込む作業を分担します。各プロセッサは、ファイルのほぼ等しい部分を読み込みます。このファイルセットを作成したプロセッサの数は、現在のLIGGGHTS(R)-PUBLICシミュレーション内のプロセッサの数と異なる場合があります。これは、並列I/Oをサポートする並列マシン上での高速な入力モードとなります。

リスタートファイルには、シミュレーションに関する以下の情報が保存されます：単位系とアトムスタイル、シミュレーションボックスのサイズと形状、境界設定、グループ定義、タイプごとのアトム設定（質量など）、アトムごとの属性（グループ割り当てや分子のトポロジー属性を含む）、力場スタイルと係数、およびspecial_bondsの設定。これにより、リスタートファイルを読み込む入力スクリプト内でこれらの量に関するコマンドを再指定する必要はありませんが、リスタートファイルを読み込んだ後に設定を再定義することはできます。

一つの例外として、一部のペアスタイルはその情報をリスタートファイルに保存しません。個別のペアスタイルに関するドキュメンテーションページに、この場合について記載があります。また、bond_style hybrid（およびangle_style、dihedral_style、improper_style hybrid）にも同様のことが当てはまります。

pair_modifyコマンドで行った設定（例えばシフトやテール設定など）は、ペアスタイルとともにリスタートファイルに保存されます。唯一の例外は、pair_modify compute設定が保存されないことです。

シミュレーションで使用されたfixのリストはリスタートファイルに保存されません。したがって、新しい入力スクリプトでは、使用するすべてのfixを指定する必要があります。なお、一部のfixは内部の「状態」を保存し、その状態がリスタートファイルに書き込まれます。このため、リスタートされたシミュレーションでそのfixが計算を続行できるようになります。このようなfixを再度有効にするには、新しい入力スクリプト内のfixコマンドで、リスタートファイルを書き込んだ入力スクリプトで使用されたのと同じfix-IDおよびgroup-IDを使用する必要があります。もし一致するものが見つかれば、LIGGGHTS(R)-PUBLICはそのfixが再有効化されることを示すメッセージを表示します。一致するものが見つからない場合、新しいスクリプトによる最初の実行または最適化が行われる前に、保存されたfixの「状態」情報は破棄されます。どのfixがこの方法でリスタート可能かについては、個別のfixに関するドキュメンテーションページを参照してください。

壊れた結合（例えば結合切断ポテンシャルによって切断された結合）は、タイプ0の壊れた結合としてリスタートファイルに書き込まれます。したがって、リスタートファイルが読み込まれると、これらの結合は依然として壊れた状態のままとなります。

[!WARNING]リスタートファイルにはその他の情報は保存されません。つまり、リスタートファイルを読み込む入力スクリプトでは、[timestep size](), [thermodynamic](), [neighbor list]()の基準（[neigh_modify]()コマンドで行った設定を含む）、[dump]() file out put、[geometric region]()など、これらの量に対する設定を指定する必要があります。

## 制限事項
none

## 関連コマンド
[read_data](), [read_dump](), [write_restart](), [restart]()

## デフォルト
none
