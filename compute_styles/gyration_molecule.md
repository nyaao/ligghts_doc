# compute gyration/molecule command

## 構文
```
compute ID group-ID gyration/molecule general_keyword general_values keyword value ...
```
- ID、group-IDは計算コマンドで文書化されています
- gyration/molecule = この計算コマンドのスタイル名
- general_keywords general_valuesは計算で文書化されています
- ゼロ個以上のキーワード/値ペアを追加できます
- キーワード = tensor  
tensor値 = none

## 例
```
compute 1 molecule gyration/molecule
compute 2 molecule gyration/molecule tensor
```

## 説明
個々の分子の回転半径Rgを計算する計算を定義します。この計算には、原子が周期境界を通過する影響がすべて含まれます。

Rgは分子のサイズを測る指標であり、次の式で計算されます。

$$
R_g^2 = \frac{1}{M}\sum_im_i\left(r_i-r_{cm}\right)^2
$$

ここで、Mは分子の総質量、Rcmは分子の質量中心の位置であり、合計は分子およびグループ内のすべての原子に対して行われます。

もしtensorキーワードが指定されている場合、スカラー値のRgは計算されず、代わりに各分子のRgテンソルが計算されます。テンソルの成分の計算式は上記の式と同じですが、(Ri - Rcm)^2はxy成分の場合、(Rix - Rcmx) * (Riy - Rcmy)などに置き換えられます。テンソルの6つの成分はxx、yy、zz、xy、xz、yzの順で並べられます。

特定の分子のRgは、その分子の1つ以上の原子が指定されたグループに属している場合にのみ計算されます。通常、分子内のすべての原子がそのグループに含まれているべきですが、これは必須ではありません。この場合、LIGGGHTS(R)-PUBLICは警告を表示します。Rg計算に貢献するのは、グループ内の原子のみです。

この計算によって生成される分子ごとの量の並び順は、分子ごとのデータを生成する他の計算コマンドによって生成される並び順と一致します。概念的に、分子IDは指定されたグループに1つ以上の原子が含まれている分子に対して昇順で並べられます。

[!WARNING]原子の座標は「アンラップされた」形式でRgに寄与します。これは、各原子に関連付けられたイメージフラグを使用することによって実現されます。「アンラップされた」座標については、dump customコマンドで説明されています。また、read_dataコマンドのAtomsセクションでは、イメージフラグとそれが各原子にどのように設定されるかについて説明しています。この計算を呼び出す前に、set imageコマンドを使用してイメージフラグをリセット（例：0に設定）することができます。

## 出力情報
この計算は、tensorキーワードが指定されていない場合はグローバルベクトルを、指定されている場合はグローバル配列を計算します。ベクトルの長さまたは配列の行数は分子の数に対応します。tensorキーワードが指定された場合、グローバル配列は6列になります。ベクトルまたは配列は、計算からのグローバル値を入力として使用する任意のコマンドによってアクセスできます。このセクションでは、LIGGGHTS(R)-PUBLICの出力オプションの概要が説明されています。

この計算によって得られるベクトルまたは配列のすべての値は「集約的」(intensive) です。ベクトルまたは配列の値は距離[units]()で表されます。

## 制限事項
none

## 関連コマンド
[compute gyration]()

## デフォルト
none